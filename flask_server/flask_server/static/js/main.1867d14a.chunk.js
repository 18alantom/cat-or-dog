(this.webpackJsonptemp=this.webpackJsonptemp||[]).push([[0],{10:function(e,t,a){e.exports=a(18)},15:function(e,t,a){},17:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(5),i=a.n(c),o=(a(15),a(2)),s=a.n(o),l=a(3),u=a(6),d=a(7),h=a(1),p=a(9),m=a(8),v=(a(17),function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={showCam:!1,vidCap:null,hasSelected:!1},n.uploadChangeHandler=n.uploadChangeHandler.bind(Object(h.a)(n)),n.cameraClickHandler=n.cameraClickHandler.bind(Object(h.a)(n)),n.captureClickHandler=n.captureClickHandler.bind(Object(h.a)(n)),n.verdictClickHandler=n.verdictClickHandler.bind(Object(h.a)(n)),n.dontShowCam=n.dontShowCam.bind(Object(h.a)(n)),n.videoRef=r.a.createRef(),n.captureRef=r.a.createRef(),n}return Object(d.a)(a,[{key:"dontShowCam",value:function(){var e=this.state.vidCap;this.setState((function(t){var a=!t.showCam;return e.getVideoTracks().forEach((function(e){return e.stop()})),{showCam:a,vidCap:null}}))}},{key:"cameraClickHandler",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.state.vidCap)){e.next=5;break}this.dontShowCam(),e.next=16;break;case 5:return e.prev=5,a={video:{facingMode:"environment",aspectRatio:1}},e.next=9,navigator.mediaDevices.getUserMedia(a);case 9:t=e.sent,this.setState((function(e){return{vidCap:t,showCam:!e.showCam}})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.error(e.t0);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"uploadChangeHandler",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var a,n,r=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=t.target.files).length>0&&((n=new FileReader).onload=function(e){var t=new Image;t.onload=function(e){var a=t.width,n=t.height,c=n<a?n:a,i=Math.max((a-n)/2,0),o=Math.max((n-a)/2,0),s=r.captureRef.current,l=s.width,u=s.height;r.captureRef.current.getContext("2d").drawImage(t,i,o,c,c,0,0,l,u),r.setState({hasSelected:!0})},t.src=n.result},n.readAsDataURL(a[0]));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"captureClickHandler",value:function(e){console.log("...klachic");var t=this.captureRef.current,a=t.width,n=t.height;this.captureRef.current.getContext("2d").drawImage(this.videoRef.current,0,0,a,n),this.setState({hasSelected:!0})}},{key:"verdictClickHandler",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=this.state.vidCap&&this.dontShowCam(),t=this.captureRef.current,a=t.toDataURL("image/jpeg",1),n=new Request("/",{method:"POST",body:a}),e.next=7,fetch(n).then((function(e){return e.text()}));case 7:r=e.sent,console.log(r);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.showCam,a=e.vidCap,n=e.hasSelected,c=window,i=c.innerWidth>c.innerHeight?"50vh":"90vw",o=t?"24px":"0px",s=t?i:"0",l=t?"calc(".concat(i,"/3)"):n?i:"0";null!=a&&t&&(this.videoRef.current.srcObject=a);var u={marginTop:t?"0":"-15vh"},d={height:s,width:s,marginBottom:o},h={marginBottom:n?"24px":o,height:l,width:l};return r.a.createElement("div",{className:"App"},r.a.createElement("h1",{className:"App-title",style:u},r.a.createElement("span",{className:"App-title-hp"},"Cat")," ",r.a.createElement("span",{className:"App-title-or"},"or")," ",r.a.createElement("span",{className:"App-title-hp"},"Dog")),r.a.createElement("video",{ref:this.videoRef,style:d,className:"Video",autoPlay:!0}),r.a.createElement("canvas",{ref:this.captureRef,style:h,className:"Canvas",width:"224",height:"224"}),r.a.createElement("div",{className:"Button-container"},n&&r.a.createElement("button",{className:"Button",id:"Button-click",onClick:this.verdictClickHandler},"Verdict"),t?r.a.createElement("button",{className:"Button",id:"Button-click",onClick:this.captureClickHandler},"Capture"):r.a.createElement("label",{className:"Button",id:"Button-upload"},r.a.createElement("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:this.uploadChangeHandler}),"Select"),r.a.createElement("button",{className:"Button",id:"Button-click",onClick:this.cameraClickHandler},t?"Stop":"Camera")))}}]),a}(r.a.Component));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,null)),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.1867d14a.chunk.js.map